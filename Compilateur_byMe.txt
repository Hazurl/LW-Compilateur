include("Concours_Compilateur");
//:: CONSTANTE LIE A LA COMPILATION
global _wordAI = [];
global _CompilVar = [];
global _KeyWord = ["var"]; // Pour l'instant les seuls mise en place
global _NativeFunction = ["debug" : debug];
global _Structure = [];
global _IA = "";

//:: CONSTANTE KEYWORD
global KW_IF = 1;
global KW_IF_ELSE = 2;
global KW_WHILE = 3;
global KW_DO_WHILE = 4;
global KW_FOR = 5;
global KW_FOREACH = 6;
global KW_PARENTHESE = 7;

function _CompileAndRun (@str) {
    _IA = @str;
    var stack1 = new_Stack();
}

function _CreateStructure () {

}

//:: CREATION DE L'OBJET STACK, DE TYPE LIFO, "last in first out"
function new_Stack () { //Creation de l'objet
	return @function (@cmd) {
		var _stack = []; // La pile
		var _top = null; // La derniere valeur
		var _size = 0;
		if (cmd === "isEmpty") return function () { return (_size === 0); }; // Retourne true si la pile est vide, false sinon
		if (cmd === "size") return function () { return _size; }; // Retourne la taille de la pile
		if (cmd === "top") return function () { return _top; }; // Retourne la taille de la pile
		if (cmd === "pop") return @function () { // Supprime le dernier objet et le renvoie
			if (_size === 0) return null;
			var tmp = _top;

			remove(_stack, _size - 1); _size--;
			_top = _stack[_size - 1];

			return tmp;
		};
		if (cmd === "push") return @function (@elem) { // Supprime le dernier objet et le renvoie
			if (elem === null) return ;
			_top = elem;
			_size++;
			push(_stack, elem);
		};
	};
}